# network 学习笔记

****

# 网络

电脑发送包

> 电脑内有arp表[^arp]
> 
> (源mac 目标mac)

> (源ip 目标ip)

|
|

↓

交换机

> 记录发送和接收的信息创建mac地址表

> (有mac地址表)[^mac地址]记录mac地址和端口对应
> 
> 将源IP和目标ip不在同一个子网[^子网]的包交给默认网关(一般为路由器)

|

|

↓

*电脑*  或  

路由器

> 内有arp表

> 记录ip地址表
> 
> 可以修改包的目标mac地址

|

|

↓

交换器

|

|

↓

电脑



[^mac地址]:
    * 出厂固定
    * 前 6 位：**厂商编号**（比如华为、苹果、Intel 都有固定段）
    * 后 6 位：**设备序列号**

[^子网]:
    源ip 与 目的ip同时和子网掩码进行与运算
    
    相等则在同一子网

[^arp]:
    arp协议
    
    电脑经过arp请求制定arp表 将mac地址和ip地址对应

* 电脑
  
  > 1.需要知道源ip和目标ip
  > 
  > 2.通过子网掩码判断是否在同一个子网
  > 
  > 3.在同一子网通过arp获得mac地址发送
  > 
  > 4.不在同一子网就通过arp获得默认网关的mac地址发送

* 交换机

> 1,需要知道目标mac地址
> 
> 2.通过mac地址表查映射关系
> 
> 3.查到就从指定端口发送
> 
> 4.查不到就从所有端口发送出去

* 路由器

> 1.需要知道ip地址
> 
> 2.通过路由表查映射关系
> 
> 3.查到了就发送指定端口
> 
> 4.查不到就返回一个路由不可达的数据包

*网络层(ip协议)本身没有传输包的功能,包的实际传输是委托给数据链路层,也就是以太网中的交换机来实现的*

****

## TCP(传输层)

*面向连接的,可靠的,基于字节流动的传输层通信协议*

**端口号**

> 包的传输层头部,满足进程和进程之间的通信
